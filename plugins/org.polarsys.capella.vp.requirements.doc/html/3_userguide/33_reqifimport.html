<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--
  Copyright (c) 2016, 2017 THALES GLOBAL SERVICES.
  All rights reserved. This program and the accompanying materials
  are made available under the terms of the Eclipse Public License v1.0
  which accompanies this distribution, and is available at
  http://www.eclipse.org/legal/epl-v10.html

  Contributors:
       Thales - initial API and implementation
-->
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
      <link rel="stylesheet" type="text/css" href="PLUGINS_ROOT/org.polarsys.capella.vp.requirements.doc/html/styles.css" media="all"/>
      <title>Diff/Merge Dialog</title>
   </head>
   <body>
      <h1>ReqIF Import in Capella</h1> 
      <h2>Launch the import</h2>
<p>
Right click on an Architecture element of your model and select &quot;Requirements Viewpoint&quot; &gt; &quot;Import from ReqIF&quot;:
</p>
<img src="../../images/RequirementsViewpointImportFromReqIFAction.png" alt="Import From ReqIF Action" title="Import From ReqIF Action">
<p>
You will be asked to choose a .reqif file containing data to import.
</p>
<p>
Once the ReqIF elements are loaded from the selected file, a Diff/Merge dialog opens to allow integration of Requirement elements in your model.
</p>
      <h2>Diff/Merge Dialog</h2>
      <p>
<img src="../../images/diffmerge.png" alt="Diff/Merge" title="Diff/Merge">
      </p>
      <p>
The default GUI is composed of 3 vertical sections and 2 horizontal sections. 
      </p>
      <p>
<b>Vertical sections</b><br>
The middle section represents the contents of the initial model (before import) while the section on the right-hand side represents the contents of the resulting model (after import). When hovering on the top of any section, the complete path to the model is displayed as a tooltip if the window is too narrow. Each side is associated to a colour: by default, dark red for the left model and blue for the right model. This colour code is also used in other dialogs of the diff/merge tool in order to prevent any ambiguity. 
The section on the left-hand side is the Synthesis section: it represents the differences between the models. According to the colour code, model elements which are present in the right model but not in the left model are written in blue, while they are written in dark red in the opposite case. Elements which are present in both sides but have differences in their attributes or references ("modified elements") are labeled in purple. The number of differences they contain (after filtering) is written between parentheses. The 3 sections are synchronized: clicking an element in the Synthesis section highlights it in the other sections and vice-versa. 
      </p>
      <p>
<b>Horizontal sections</b><br>
The 2 horizontal sections correspond to 2 levels of detail. The top section focuses on model elements and only reflects that level of granularity. The bottom section is the Details section: it shows the contents (attributes and references) of the model element which is currently selected in the top section.
      </p>
      <p>
For example, if a modified element (in purple) is being clicked in the Synthesis section, then the Details section displays all the attributes and references of that element that have differences. The corresponding values are displayed in the middle and right parts of the Details section according to the model they belong to. These sub-sections are called the Value sections. For instance, in the snapshot above, element "N2" is selected in the Synthesis section; the Details section shows that it has a difference on its name: the name is "N2" in the left model and "N2-Container" in the right model as shown in the Value sections.
      </p>
      
      <p>
<b>Iterative import</b><br>
By default the following options are checked for the merge operation.
      </p>
       <p>
<img src="../../images/MergeOperation.png" alt="Merge Operation" title="Merge Operation">
      </p>
      <p>
It's highly recommended to keep those options check if you have created requirements manually into your model.
You may loose manually added requirements if you uncheck those options.
      </p>
   
      <p>
<b>Filtering Capability</b><br>

The scope of the data can be customized using the <i><img src="../../images/categories.png" alt="Difference Categories" title="Difference Categories"/> Difference Categories</i> toolbar button, either by choosing to import (or not) the internal links between modules or the type definitions. See the "Requirements" part in the following screenshot:
      </p>
      <p>
<img src="../../images/diffmerge_filtering.png" alt="Diff/Merge Filtering" title="Diff/Merge Filtering">
      </p>      
      <p>
See <a href="http://wiki.eclipse.org/EMF_DiffMerge">EMF DiffMerge documentation</a> for more detailed information.
      </p>
      
<b>Reference merging rules</b>
<p>The merge policy is based the following main rules. Thus, are take into account within the merge:</p>
<ul>
	<li>For each <b>Attribute</b>, the <b>Attribute Definition</b> along with the Attribute</li>
	<li>For each <b>Attribute Definition</b>, the <b>Attribute with default value</b> along with the Attribute Definition</li>
	<li>For each <b>Module</b>, the <b>Module Type</b> along with the module</li>
	<li>For each <b>Internal Relation</b>, the <b>Source/Target</b> along with the Internal Relation and their owned Attributes</li>
	<li>For each <b>Requirement</b>, the <b>Requirement Type</b> along with the Requirement Type</li>
</ul>

<b>Add non-referenced attribute definition</b>
<p>By default, non-referenced attribute definitions are not imported into Capella model. To explicitly ask Requirement Viewpoint to import these attribute definitions, you could do the following steps:</p>
<ul>
	<li>In the <b>Model Update</b> dialog, deactivate the <b>Type definitions</b> filter</li>
	  <p>
		<img src="../../images/NonReferencedAttributeDefinition_Step1.png" alt="Deactivate Type definitions filter" title="Deactivate Type definitions filter">
      </p> 
	<li>Do a "Copy to the right action" on Requirement Modules</li>
	<li>Under the <b>Types Folder</b> element, choose the attribute definition to put to the Resulting model</li>
	  <p>
		<img src="../../images/NonReferencedAttributeDefinition_Step2.png" alt="Copy attribute definition" title="Copy attribute definition">
      </p>
</ul>

      <h2>Iterativity</h2>
<p>After an import, a new file .bridgetraces is created aside the melodymodeller file. This file is used to allow successive imports. It shall not be deleted.</p>

   </body>
</html>
